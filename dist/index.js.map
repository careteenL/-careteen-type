{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["const _toString = Object.prototype.toString\n\nconst NULL = 'null'\nconst OBJECT = 'object'\nconst NUMBER = 'number'\nconst BOOLEAN = 'boolean'\nconst STRING = 'string'\nconst UNKNOW = 'unknow'\n\n/**\n * \n * @param {*} element 任意类型的变量\n * @param {Boolean} strict [default: false] 是否为严格模式\n * @return {String} 变量的真实类型\n */ \nexport default function type (element, strict = false) {\n  strict = !!strict\n\n  // #1 fix typeof null === 'object'\n  if (element === null) {\n    return NULL\n  }\n\n  const eleType = typeof element\n\n  // #2 return [number string boolean undefined symbol]\n  if (eleType !== OBJECT) {\n    return eleType\n  }\n\n  let eleRealType\n  let eleRealTypeLower\n\n  try {\n    eleRealType = _toString.call(element).slice(8, -1)\n    eleRealTypeLower = eleRealType.toLowerCase()\n  } catch (e) {\n    // #3 IE activie 对象\n    return OBJECT\n  }\n\n  // #4 fix typeof new String('') === 'object' , expect 'string'\n  if (eleRealTypeLower !== OBJECT) {\n    // 严格模式下 会严格区分`number、string、boolean`的原始值和对象值\n    // example `new String('') => 'String'`、`String('') => 'string'`\n    if (strict && (eleRealTypeLower === NUMBER || eleRealTypeLower === BOOLEAN || eleRealTypeLower === STRING)) {\n      return eleRealType\n    }\n    return eleRealTypeLower\n  }\n\n  if (element.constructor == Object) {\n    return eleRealTypeLower\n  }\n\n  // #5 Object.create(null)\n  try {\n    // __proto__ 为部分早期浏览器\n    if (Object.getPrototypeOf(element) === NULL || element.__proto__ === NULL) {\n      return OBJECT\n    }\n  } catch (e) {\n    // IE 无 Object.getPrototypeOf\n  }\n\n  // #6 function A () {}; new A\n  try {\n    const constructorName = element.constructor.name\n    if (typeof constructorName === STRING) {\n      return constructorName\n    }\n  } catch (e) {\n    // No constructor\n  }\n\n  // function A() {}; A.prototype.constructor = null; new A\n  return UNKNOW\n}\n"],"names":["_toString","Object","prototype","toString","NULL","OBJECT","NUMBER","BOOLEAN","STRING","UNKNOW","type","element","strict","eleType","eleRealType","eleRealTypeLower","call","slice","toLowerCase","e","constructor","getPrototypeOf","__proto__","constructorName","name"],"mappings":";;;;;;;;;;;;;EAAA,IAAMA,YAAYC,OAAOC,SAAP,CAAiBC,QAAnC;;EAEA,IAAMC,OAAO,MAAb;EACA,IAAMC,SAAS,QAAf;EACA,IAAMC,SAAS,QAAf;EACA,IAAMC,UAAU,SAAhB;EACA,IAAMC,SAAS,QAAf;EACA,IAAMC,SAAS,QAAf;;EAEA;;;;;;AAMA,EAAe,SAASC,IAAT,CAAeC,OAAf,EAAwC;EAAA,MAAhBC,MAAgB,uEAAP,KAAO;;EACrDA,WAAS,CAAC,CAACA,MAAX;;EAEA;EACA,MAAID,YAAY,IAAhB,EAAsB;EACpB,WAAOP,IAAP;EACD;;EAED,MAAMS,iBAAiBF,OAAjB,yCAAiBA,OAAjB,CAAN;;EAEA;EACA,MAAIE,YAAYR,MAAhB,EAAwB;EACtB,WAAOQ,OAAP;EACD;;EAED,MAAIC,oBAAJ;EACA,MAAIC,yBAAJ;;EAEA,MAAI;EACFD,kBAAcd,UAAUgB,IAAV,CAAeL,OAAf,EAAwBM,KAAxB,CAA8B,CAA9B,EAAiC,CAAC,CAAlC,CAAd;EACAF,uBAAmBD,YAAYI,WAAZ,EAAnB;EACD,GAHD,CAGE,OAAOC,CAAP,EAAU;EACV;EACA,WAAOd,MAAP;EACD;;EAED;EACA,MAAIU,qBAAqBV,MAAzB,EAAiC;EAC/B;EACA;EACA,QAAIO,WAAWG,qBAAqBT,MAArB,IAA+BS,qBAAqBR,OAApD,IAA+DQ,qBAAqBP,MAA/F,CAAJ,EAA4G;EAC1G,aAAOM,WAAP;EACD;EACD,WAAOC,gBAAP;EACD;;EAED,MAAIJ,QAAQS,WAAR,IAAuBnB,MAA3B,EAAmC;EACjC,WAAOc,gBAAP;EACD;;EAED;EACA,MAAI;EACF;EACA,QAAId,OAAOoB,cAAP,CAAsBV,OAAtB,MAAmCP,IAAnC,IAA2CO,QAAQW,SAAR,KAAsBlB,IAArE,EAA2E;EACzE,aAAOC,MAAP;EACD;EACF,GALD,CAKE,OAAOc,CAAP,EAAU;EACV;;;EAGF;EACA,MAAI;EACF,QAAMI,kBAAkBZ,QAAQS,WAAR,CAAoBI,IAA5C;EACA,QAAI,QAAOD,eAAP,yCAAOA,eAAP,OAA2Bf,MAA/B,EAAuC;EACrC,aAAOe,eAAP;EACD;EACF,GALD,CAKE,OAAOJ,CAAP,EAAU;EACV;;;EAGF;EACA,SAAOV,MAAP;EACD;;;;;;;;"}